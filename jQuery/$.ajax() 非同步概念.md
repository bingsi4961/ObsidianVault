---
title: $.ajax() 非同步概念
tags: [jQuery]

---

:::info
jquery $.ajax() 是非同步的機制，但我有個疑問，按照非同步的精神，當資料送至後端後，後端還正在處理資料時，就會 response 到本機端，然後馬上就會執行 success()、complete()。而 success() 有個參數是代表從後端回傳的資料，這時候我就不懂了，既然後端還正在處理資料，那怎麼 success 有辦法收到後端回傳的資料？
:::

非同步請求的真正意義是指瀏覽器在發送請求後，不會阻塞 JavaScript 執行，而是繼續執行其他程式碼。但 success 和 complete 回調函數**只會在後端完成處理並回傳響應後才會執行**。

工作流程是：
1. 發送 AJAX 請求到後端
2. 瀏覽器繼續執行其他 JavaScript 代碼而不阻塞
3. 後端處理資料
4. 後端完成處理並回傳資料
5. 瀏覽器接收到響應
6. 執行 success 回調函數（若請求成功），並傳入後端回傳的資料

所以 success 回調函數中的參數確實是已經完成處理的後端資料，這些資料是在後端處理完成後才回傳的。

這就是為什麼我們需要使用回調函數—它們會等待後端響應後才執行，而不是立即執行。

:::info
你的意思是指，寫在 $.ajax() 後面的程式碼，在 $.ajax() 丟出資料給後端後，不等回傳資料，就會馬上執行了？
:::

當您執行 $.ajax() 後，JavaScript 會：

1. 發送請求到後端
2. **立即繼續執行** $.ajax() 後面的程式碼，不會等待後端回應
3. 當後端最終處理完成並回傳資料時，才會觸發您在 $.ajax() 中定義的 success、error 或 complete 等回調函數

舉個例子：

```javascript
console.log("開始發送 AJAX 請求");

$.ajax({
  url: "some-api-endpoint",
  method: "GET",
  success: function(response) {
    console.log("後端回應:", response);
  }
});

console.log("AJAX 請求已發送，但還未收到回應");
// 此時繼續執行其他程式碼...
```

在這個例子中，執行順序會是：
1. 顯示 "開始發送 AJAX 請求"
2. 發送 AJAX 請求
3. 立即顯示 "AJAX 請求已發送，但還未收到回應"
4. 繼續執行其他程式碼
5. 當後端回應時（可能是幾毫秒或幾秒後），才會執行 success 回調函數並顯示 "後端回應: [資料]"

這就是為什麼非同步操作在處理需要等待的任務（如網路請求）時非常有用，因為它不會阻塞其餘程式碼的執行。
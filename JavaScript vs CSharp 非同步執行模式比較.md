---
date: 2025-07-09 09:52
aliases: 
tags:
  - JavaScript
  - CSharp
  - AJAX
  - async/await
---
# Metadata
Status :: ğŸŒ±
Note Type :: ğŸ“°
Source URL :: {æ–‡ç«  URL}
Author :: {ä½œè€…åç¨±}
Topics :: {ç­†è¨˜è·Ÿä»€éº¼ä¸»é¡Œæœ‰é—œï¼Œç”¨ `[Topic],[Topic]` æ ¼å¼}

---
# é€£çµç­†è¨˜
#### ğŸ“‘ [[æ­¡è¿]]
#### ğŸ“‘ [[æ­¡è¿]]

---
### JavaScriptï¼šé€šçŸ¥æ¨¡å¼

- **åˆ†æ”¯åŸ·è¡Œç·’å®Œæˆ** â†’ **é€šçŸ¥ä¸»åŸ·è¡Œç·’** â†’ **ä¸»åŸ·è¡Œç·’æ¥æ‰‹åŸ·è¡Œ**
- æ‰€æœ‰ JavaScript ç¨‹å¼ç¢¼éƒ½åœ¨ä¸»åŸ·è¡Œç·’åŸ·è¡Œ (ä¸åŒ…æ‹¬åˆ†æ”¯åŸ·è¡Œç·’)
- éåŒæ­¥æ“ä½œåœ¨å…¶ä»–åŸ·è¡Œç·’ï¼Œå®Œæˆå¾Œé€é Event Loop é€šçŸ¥ä¸»åŸ·è¡Œç·’

### C#ï¼šç›´æ¥åŸ·è¡Œæ¨¡å¼

- **åˆ†æ”¯åŸ·è¡Œç·’å®Œæˆ** â†’ **ç›´æ¥åœ¨è©²åŸ·è¡Œç·’ç¹¼çºŒåŸ·è¡Œ**
- ç¨‹å¼ç¢¼å¯èƒ½åœ¨ä¸åŒåŸ·è¡Œç·’åŸ·è¡Œ
- åˆ©ç”¨åŸ·è¡Œç·’æ± ï¼Œé¿å…åŸ·è¡Œç·’åˆ‡æ›æˆæœ¬

---

## JavaScript åŸ·è¡Œæ©Ÿåˆ¶

### æ¶æ§‹çµ„æˆ

- **ä¸»åŸ·è¡Œç·’**ï¼šåŸ·è¡Œæ‰€æœ‰ JavaScript ç¨‹å¼ç¢¼
- **Web APIs åŸ·è¡Œç·’**ï¼šè™•ç†ç¶²è·¯è«‹æ±‚ã€è¨ˆæ™‚å™¨ã€I/O æ“ä½œ
- **Event Loop**ï¼šç®¡ç†éåŒæ­¥ä»»å‹™çš„èª¿åº¦
- **Event Queue**ï¼šå­˜æ”¾å¾…åŸ·è¡Œçš„å›èª¿å‡½å¼

### åŸ·è¡Œæµç¨‹

```javascript
async function example() {
    console.log('1. ä¸»åŸ·è¡Œç·’é–‹å§‹');
    
    // ç¶²è·¯è«‹æ±‚äº¤çµ¦åˆ†æ”¯åŸ·è¡Œç·’è™•ç†
    const result = await fetch('/api/data');
    
    console.log('3. å›åˆ°ä¸»åŸ·è¡Œç·’ç¹¼çºŒ');
}

example();
console.log('2. ä¸»åŸ·è¡Œç·’ç¹¼çºŒå…¶ä»–ä»»å‹™');
```

**åŸ·è¡Œé †åºï¼š**

1. ä¸»åŸ·è¡Œç·’åŸ·è¡Œ `console.log('1. ä¸»åŸ·è¡Œç·’é–‹å§‹')`
2. åˆ†æ”¯åŸ·è¡Œç·’é–‹å§‹è™•ç† `fetch`ï¼Œä¸»åŸ·è¡Œç·’æš«åœè©²å‡½å¼
3. ä¸»åŸ·è¡Œç·’ç¹¼çºŒåŸ·è¡Œ `console.log('2. ä¸»åŸ·è¡Œç·’ç¹¼çºŒå…¶ä»–ä»»å‹™')`
4. åˆ†æ”¯åŸ·è¡Œç·’å®Œæˆå¾Œï¼Œé€šçŸ¥ä¸»åŸ·è¡Œç·’
5. ä¸»åŸ·è¡Œç·’ç©ºé–’æ™‚ï¼ŒåŸ·è¡Œ `console.log('3. å›åˆ°ä¸»åŸ·è¡Œç·’ç¹¼çºŒ')`

### é—œéµç‰¹æ€§

- **å–®ä¸€åŸ·è¡Œç·’åŸ·è¡Œ JavaScript ç¨‹å¼ç¢¼**
- **Event Queue æ’éšŠç­‰å¾…**
- **ä¸»åŸ·è¡Œç·’å¿™ç¢Œæ™‚ï¼Œå›èª¿å‡½å¼éœ€ç­‰å¾…**

---

## C# åŸ·è¡Œæ©Ÿåˆ¶

### æ¶æ§‹çµ„æˆ

- **ä¸»åŸ·è¡Œç·’**ï¼šå•Ÿå‹•éåŒæ­¥æ“ä½œ
- **åŸ·è¡Œç·’æ± **ï¼šè™•ç†éåŒæ­¥ä»»å‹™
- **TaskScheduler**ï¼šç®¡ç†ä»»å‹™èª¿åº¦
- **SynchronizationContext**ï¼šæ§åˆ¶åŸ·è¡Œç·’åˆ‡æ›

### åŸ·è¡Œæµç¨‹

```csharp
async Task Example()
{
    Console.WriteLine($"1. é–‹å§‹ - åŸ·è¡Œç·’ {Thread.CurrentThread.ManagedThreadId}");
    
    await SomeAsyncOperation();
    
    Console.WriteLine($"2. ç¹¼çºŒ - åŸ·è¡Œç·’ {Thread.CurrentThread.ManagedThreadId}");
    // å¯èƒ½åœ¨ä¸åŒåŸ·è¡Œç·’åŸ·è¡Œ
}
```

**åŸ·è¡Œé †åºï¼š**

1. ä¸»åŸ·è¡Œç·’é–‹å§‹åŸ·è¡Œ
2. åŸ·è¡Œç·’æ± ä¸­çš„åŸ·è¡Œç·’è™•ç†éåŒæ­¥æ“ä½œ
3. æ“ä½œå®Œæˆå¾Œï¼Œ**å¯èƒ½ç›´æ¥åœ¨è©²åŸ·è¡Œç·’ç¹¼çºŒåŸ·è¡Œ**
4. ä¸éœ€è¦åˆ‡æ›å›åŸå§‹åŸ·è¡Œç·’

### é—œéµç‰¹æ€§

- **å¤šåŸ·è¡Œç·’åŸ·è¡Œç¨‹å¼ç¢¼**
- **æ•ˆèƒ½å„ªåŒ–ï¼Œé¿å…åŸ·è¡Œç·’åˆ‡æ›**
- **å¯èƒ½åœ¨ä¸åŒåŸ·è¡Œç·’ç¹¼çºŒåŸ·è¡Œ**

---

## å¯¦éš›ç¯„ä¾‹æ¯”è¼ƒ

### ä¸»åŸ·è¡Œç·’å¿™ç¢Œæƒ…æ³

**JavaScriptï¼š**

```javascript
async function asyncTask() {
    console.log('éåŒæ­¥ä»»å‹™é–‹å§‹');
    await new Promise(resolve => setTimeout(resolve, 1000)); // 1ç§’å®Œæˆ
    console.log('éåŒæ­¥ä»»å‹™çµæŸ'); // éœ€ç­‰å¾…ä¸»åŸ·è¡Œç·’ç©ºé–’
}

asyncTask();

// ä¸»åŸ·è¡Œç·’å¿™ç¢Œ 3 ç§’
console.log('ä¸»åŸ·è¡Œç·’é–‹å§‹å¿™ç¢Œ');
for (let i = 0; i < 1000000000; i++) {
    // å¿™ç¢Œä¸­...
}
console.log('ä¸»åŸ·è¡Œç·’å¿™ç¢ŒçµæŸ');

// è¼¸å‡ºï¼šéåŒæ­¥ä»»å‹™é–‹å§‹ â†’ ä¸»åŸ·è¡Œç·’é–‹å§‹å¿™ç¢Œ â†’ ä¸»åŸ·è¡Œç·’å¿™ç¢ŒçµæŸ â†’ éåŒæ­¥ä»»å‹™çµæŸ
```

**C#ï¼š**

```csharp
async Task AsyncTask()
{
    Console.WriteLine("éåŒæ­¥ä»»å‹™é–‹å§‹");
    await Task.Delay(1000); // 1ç§’å®Œæˆ
    Console.WriteLine("éåŒæ­¥ä»»å‹™çµæŸ"); // å¯èƒ½ç«‹å³åœ¨åŸ·è¡Œç·’æ± åŸ·è¡Œç·’åŸ·è¡Œ
}

AsyncTask();

// ä¸»åŸ·è¡Œç·’å¿™ç¢Œ 3 ç§’
Console.WriteLine("ä¸»åŸ·è¡Œç·’é–‹å§‹å¿™ç¢Œ");
Thread.Sleep(3000);
Console.WriteLine("ä¸»åŸ·è¡Œç·’å¿™ç¢ŒçµæŸ");

// è¼¸å‡ºï¼šéåŒæ­¥ä»»å‹™é–‹å§‹ â†’ ä¸»åŸ·è¡Œç·’é–‹å§‹å¿™ç¢Œ â†’ éåŒæ­¥ä»»å‹™çµæŸ â†’ ä¸»åŸ·è¡Œç·’å¿™ç¢ŒçµæŸ
```

---

## è¨­è¨ˆåŸå› åˆ†æ

### JavaScript é¸æ“‡é€šçŸ¥æ¨¡å¼çš„åŸå› 

1. **DOM å®‰å…¨æ€§**ï¼šé¿å…å¤šåŸ·è¡Œç·’åŒæ™‚æ“ä½œ DOM
2. **ç°¡åŒ–ç¨‹å¼è¨­è¨ˆ**ï¼šä¸éœ€è¦è€ƒæ…®åŸ·è¡Œç·’åŒæ­¥å•é¡Œ
3. **UI éŸ¿æ‡‰æ€§**ï¼šç¢ºä¿ UI æ›´æ–°åœ¨æ­£ç¢ºåŸ·è¡Œç·’åŸ·è¡Œ

### C# é¸æ“‡ç›´æ¥åŸ·è¡Œæ¨¡å¼çš„åŸå› 

1. **æ•ˆèƒ½å„ªåŒ–**ï¼šæ¸›å°‘åŸ·è¡Œç·’åˆ‡æ›æˆæœ¬
2. **è³‡æºåˆ©ç”¨**ï¼šå……åˆ†åˆ©ç”¨åŸ·è¡Œç·’æ± 
3. **éˆæ´»æ€§**ï¼šå¯é€é SynchronizationContext æ§åˆ¶è¡Œç‚º

---

## å¯¦å‹™å½±éŸ¿

### JavaScript é–‹ç™¼æ³¨æ„äº‹é …

- é¿å…åœ¨ä¸»åŸ·è¡Œç·’é€²è¡Œé•·æ™‚é–“åŒæ­¥æ“ä½œ
- ä½¿ç”¨ Web Workers è™•ç†å¯†é›†è¨ˆç®—
- ç†è§£ Event Loop çš„é‹ä½œæ©Ÿåˆ¶

### C# é–‹ç™¼æ³¨æ„äº‹é …

- UI æ›´æ–°éœ€è¦åˆ‡æ›åˆ° UI åŸ·è¡Œç·’
- ä½¿ç”¨ `ConfigureAwait(false)` é¿å…ä¸å¿…è¦çš„åŸ·è¡Œç·’åˆ‡æ›
- äº†è§£ SynchronizationContext çš„ä½œç”¨

---

## ç¸½çµ

|ç‰¹æ€§|JavaScript|C#|
|---|---|---|
|åŸ·è¡Œæ¨¡å¼|é€šçŸ¥æ¨¡å¼|ç›´æ¥åŸ·è¡Œæ¨¡å¼|
|åŸ·è¡Œç·’ä½¿ç”¨|å–®åŸ·è¡Œç·’åŸ·è¡Œç¨‹å¼ç¢¼|å¤šåŸ·è¡Œç·’åŸ·è¡Œç¨‹å¼ç¢¼|
|å®Œæˆå¾Œè¡Œç‚º|é€šçŸ¥ä¸»åŸ·è¡Œç·’æ¥æ‰‹|ç›´æ¥åœ¨ç•¶å‰åŸ·è¡Œç·’ç¹¼çºŒ|
|ä¸»è¦å„ªå‹¢|åŸ·è¡Œç·’å®‰å…¨ã€ç°¡åŒ–ç¨‹å¼è¨­è¨ˆ|æ•ˆèƒ½å„ªåŒ–ã€è³‡æºåˆ©ç”¨|
|ä¸»è¦æŒ‘æˆ°|ä¸»åŸ·è¡Œç·’é˜»å¡å½±éŸ¿å›èª¿|åŸ·è¡Œç·’åˆ‡æ›è¤‡é›œæ€§|
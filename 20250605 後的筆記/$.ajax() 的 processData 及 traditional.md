---
date: 2025-07-31 16:23
aliases: 
tags:
  - jQuery
  - AJAX
---
# Metadata
Status :: ğŸŒ±
Note Type :: ğŸ“°
Source URL :: {æ–‡ç«  URL}
Author :: {ä½œè€…åç¨±}
Topics :: {ç­†è¨˜è·Ÿä»€éº¼ä¸»é¡Œæœ‰é—œï¼Œç”¨ `[Topic],[Topic]` æ ¼å¼}

---
# é€£çµç­†è¨˜
#### ğŸ“‘ [[]]
#### ğŸ“‘ [[]]

---
## åŸºæœ¬æ¦‚å¿µ

### processData åƒæ•¸

- **ä½œç”¨**ï¼šæ§åˆ¶ jQuery æ˜¯å¦è¦è™•ç†ï¼ˆåºåˆ—åŒ–ï¼‰`data` åƒæ•¸
- **é è¨­å€¼**ï¼š`true`
- **è¨­å®šç‚º true**ï¼šjQuery æœƒè‡ªå‹•å°‡è³‡æ–™è½‰æ›æˆæŸ¥è©¢å­—ä¸²æ ¼å¼
- **è¨­å®šç‚º false**ï¼šjQuery ä¸è™•ç†è³‡æ–™ï¼Œç›´æ¥å‚³é€åŸå§‹æ ¼å¼

## å„ç¨®è³‡æ–™æ ¼å¼è™•ç†çµæœ

### 1. æ™®é€šç‰©ä»¶

#### åŸå§‹è³‡æ–™

```javascript
data: { name: 'john', age: 30 }
```

#### processData: trueï¼ˆé è¨­ï¼Œæ¨è–¦ï¼‰

```javascript
// è½‰æ›çµæœï¼šname=john&age=30
// Content-Type: application/x-www-form-urlencoded
// ç‹€æ…‹ï¼šâœ… æ­£å¸¸é‹ä½œ
```

#### processData: false

```javascript
// çµæœï¼š[object Object]
// ç‹€æ…‹ï¼šâŒ éŒ¯èª¤ï¼Œç„¡æ³•æ­£ç¢ºå‚³é€
```

**çµè«–**ï¼šæ™®é€šç‰©ä»¶æ‡‰ä½¿ç”¨é è¨­çš„ `processData: true`

---

### 2. é™£åˆ—è³‡æ–™

#### åŸå§‹è³‡æ–™

```javascript
data: { hobbies: ['read', 'run'] }
```

#### processData: true

```javascript
// è½‰æ›çµæœï¼šhobbies[]=read&hobbies[]=run
// ç‹€æ…‹ï¼šâœ… æ­£å¸¸é‹ä½œ
```

#### åŠ ä¸Š traditional: true

```javascript
// è½‰æ›çµæœï¼šhobbies=read&hobbies=run
// æ›´ç›¸å®¹æŸäº›å¾Œç«¯ç³»çµ±
```

**å»ºè­°å¯«æ³•**ï¼š

```javascript
$.ajax({
    data: { hobbies: ['read', 'run'] },
    traditional: true,  // å¢åŠ ç›¸å®¹æ€§
    // processData é è¨­ true
});
```

---

### 3. JSON å­—ä¸²

#### åŸå§‹è³‡æ–™

```javascript
data: JSON.stringify({ name: 'john', age: 30 })
// å·²ç¶“æ˜¯å­—ä¸²ï¼š'{"name":"john","age":30}'
```

#### processData: true

```javascript
// jQuery å¯èƒ½éŒ¯èª¤è™•ç† JSON å­—ä¸²
// ç‹€æ…‹ï¼šâŒ ä¸å¯é 
```

#### processData: falseï¼ˆæ¨è–¦ï¼‰

```javascript
// çµæœï¼šæ­£ç¢ºçš„ JSON å­—ä¸²
// {"name":"john","age":30}
// ç‹€æ…‹ï¼šâœ… æ­£ç¢ºå‚³é€
```

**å»ºè­°å¯«æ³•**ï¼š

```javascript
$.ajax({
    url: '/api/submit',
    type: 'POST',
    contentType: 'application/json',  // é‡è¦ï¼
    data: JSON.stringify(dataObject),
    processData: false,               // é‡è¦ï¼
    success: function(response) {
        console.log('æˆåŠŸ');
    }
});
```

**å°æ‡‰ C# å¾Œç«¯**ï¼š

```csharp
[HttpPost]
public IActionResult Submit([FromBody] MyModel model)
{
    // ä½¿ç”¨ [FromBody] æ¥æ”¶ JSON è³‡æ–™
    return Ok();
}
```

---

### 4. FormData ç‰©ä»¶

#### åŸå§‹è³‡æ–™

```javascript
var formData = new FormData();
formData.append('name', 'john');
formData.append('file', fileInput.files[0]);
data: formData
```

#### processData: true

```javascript
// FormData çµæ§‹è¢«ç ´å£
// æª”æ¡ˆä¸Šå‚³å¤±æ•—
// ç‹€æ…‹ï¼šâŒ å®Œå…¨ç„¡æ³•é‹ä½œ
```

#### processData: falseï¼ˆå¿…é ˆï¼‰

```javascript
// ä¿æŒ multipart/form-data æ ¼å¼
// ç‹€æ…‹ï¼šâœ… æ­£ç¢ºä¸Šå‚³æª”æ¡ˆå’Œè³‡æ–™
```

**å»ºè­°å¯«æ³•**ï¼š

```javascript
var formData = new FormData();
formData.append('name', 'john');
formData.append('file', fileInput.files[0]);

$.ajax({
    url: '/api/upload',
    type: 'POST',
    data: formData,
    processData: false,    // å¿…é ˆè¨­å®š
    contentType: false,    // è®“ç€è¦½å™¨è‡ªå‹•è¨­å®š
    success: function(response) {
        console.log('ä¸Šå‚³æˆåŠŸ');
    }
});
```

---

### 5. å·¢ç‹€ç‰©ä»¶

#### åŸå§‹è³‡æ–™

```javascript
data: {
    user: {
        name: 'john',
        profile: { city: 'taipei' }
    }
}
```

#### processData: true

```javascript
// è½‰æ›çµæœï¼šuser[name]=john&user[profile][city]=taipei
// ç‹€æ…‹ï¼šâš ï¸ å¯é‹ä½œï¼Œä½†å¾Œç«¯æ¥æ”¶å›°é›£
```

#### å»ºè­°ä½¿ç”¨ JSON æ ¼å¼

```javascript
$.ajax({
    contentType: 'application/json',
    data: JSON.stringify({
        user: {
            name: 'john',
            profile: { city: 'taipei' }
        }
    }),
    processData: false
});
```

## FormData vs æ™®é€šç‰©ä»¶æ·±åº¦è§£æ

### ç‚ºä»€éº¼ FormData ä¸èƒ½è¢« processData è™•ç†ï¼Ÿ

#### 1. å…§éƒ¨çµæ§‹å·®ç•°

```javascript
// æ™®é€šç‰©ä»¶ - é€æ˜çµæ§‹
var obj = { name: 'john' };
console.log(obj.name);        // âœ… 'john'
Object.keys(obj);             // âœ… ['name']

// FormData - é»‘ç›’å­çµæ§‹
var formData = new FormData();
formData.append('name', 'john');
console.log(formData.name);   // âŒ undefined
Object.keys(formData);        // âŒ []
formData.get('name');         // âœ… 'john' (éœ€è¦ç‰¹æ®Šæ–¹æ³•)
```

#### 2. è³‡æ–™æ ¼å¼å·®ç•°

```javascript
// æ™®é€šç‰©ä»¶åºåˆ—åŒ–
{ name: 'john', age: 30 } â†’ "name=john&age=30"

// FormData å…§éƒ¨æ ¼å¼ (multipart/form-data)
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="name"

john
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test.txt"
Content-Type: text/plain

[æª”æ¡ˆå…§å®¹]
------WebKitFormBoundary7MA4YWxkTrZu0gW--
```

#### 3. æª”æ¡ˆè™•ç†èƒ½åŠ›

```javascript
// FormData å¯ä»¥è™•ç†äºŒé€²ä½æª”æ¡ˆ
formData.append('file', fileInput.files[0]);

// æ™®é€šç‰©ä»¶ç„¡æ³•çœŸæ­£åŒ…å«æª”æ¡ˆ
{ file: fileInput.files[0] } // âŒ ä¸æœƒå‚³é€æª”æ¡ˆå…§å®¹
```

## æœ€ä½³å¯¦è¸ç¸½çµ

### æ±ºç­–æµç¨‹åœ–

```
å‚³é€è³‡æ–™é¡å‹ï¼Ÿ
â”œâ”€ æ™®é€šè¡¨å–®è³‡æ–™ â†’ processData: true (é è¨­)
â”œâ”€ JSON è³‡æ–™ â†’ processData: false + contentType: 'application/json'
â”œâ”€ æª”æ¡ˆä¸Šå‚³ â†’ FormData + processData: false + contentType: false
â””â”€ è¤‡é›œå·¢ç‹€ç‰©ä»¶ â†’ JSON æ ¼å¼ (æ¨è–¦)
```

### å¸¸ç”¨æ¨¡æ¿

#### 1. ä¸€èˆ¬è¡¨å–®æäº¤

```javascript
$.ajax({
    url: '/Submit',
    type: 'POST',
    data: {
        name: 'john',
        age: 30,
        hobbies: ['read', 'run']
    },
    traditional: true,  // é™£åˆ—ç›¸å®¹æ€§
    success: function(response) {
        console.log('æäº¤æˆåŠŸ');
    }
});
```

#### 2. JSON è³‡æ–™æäº¤

```javascript
$.ajax({
    url: '/api/submit',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify({
        name: 'john',
        profile: {
            city: 'taipei',
            preferences: ['A', 'B']
        }
    }),
    processData: false,
    success: function(response) {
        console.log('æäº¤æˆåŠŸ');
    }
});
```

#### 3. æª”æ¡ˆä¸Šå‚³

```javascript
var formData = new FormData();
formData.append('name', 'john');
formData.append('file', fileInput.files[0]);

$.ajax({
    url: '/api/upload',
    type: 'POST',
    data: formData,
    processData: false,
    contentType: false,
    success: function(response) {
        console.log('ä¸Šå‚³æˆåŠŸ');
    }
});
```

## å°æ‡‰çš„ C# å¾Œç«¯è™•ç†

### 1. ä¸€èˆ¬è¡¨å–®è³‡æ–™

```csharp
[HttpPost]
public IActionResult Submit(string name, int age, string[] hobbies)
{
    // ç›´æ¥æ¥æ”¶åƒæ•¸
    return Ok();
}

// æˆ–ä½¿ç”¨ Model
public class SubmitModel
{
    public string Name { get; set; }
    public int Age { get; set; }
    public string[] Hobbies { get; set; }
}

[HttpPost]
public IActionResult Submit(SubmitModel model)
{
    return Ok();
}
```

### 2. JSON è³‡æ–™

```csharp
public class JsonModel
{
    public string Name { get; set; }
    public ProfileModel Profile { get; set; }
}

public class ProfileModel
{
    public string City { get; set; }
    public string[] Preferences { get; set; }
}

[HttpPost]
public IActionResult Submit([FromBody] JsonModel model)
{
    // ä½¿ç”¨ [FromBody] æ¥æ”¶ JSON
    return Ok();
}
```

### 3. æª”æ¡ˆä¸Šå‚³

```csharp
[HttpPost]
public IActionResult Upload(string name, IFormFile file)
{
    // IFormFile æ¥æ”¶æª”æ¡ˆ
    // string æ¥æ”¶ä¸€èˆ¬æ¬„ä½
    return Ok();
}

// æˆ–ä½¿ç”¨ Model
public class UploadModel
{
    public string Name { get; set; }
    public IFormFile File { get; set; }
}

[HttpPost]
public IActionResult Upload(UploadModel model)
{
    return Ok();
}
```

## éŒ¯èª¤æ’é™¤

**å¯èƒ½åŸå› **ï¼š

- å¿˜è¨˜ `JSON.stringify()`
- å¿˜è¨˜è¨­å®š `contentType: 'application/json'`
- å¾Œç«¯æ²’æœ‰ä½¿ç”¨ `[FromBody]`

**è§£æ±ºæ–¹æ³•**ï¼š

- å‰ç«¯ï¼š`contentType` + `JSON.stringify` + `processData: false`
- å¾Œç«¯ï¼š`[FromBody]` åƒæ•¸
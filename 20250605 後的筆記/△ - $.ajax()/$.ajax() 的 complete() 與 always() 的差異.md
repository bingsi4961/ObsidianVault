---
date: 2025-07-06 16:50
aliases: 
tags:
  - jQuery
  - AJAX
---
# Metadata
Status :: ğŸŒ±
Note Type :: ğŸ“°
Source URL :: {æ–‡ç«  URL}
Author :: {ä½œè€…åç¨±}
Topics :: {ç­†è¨˜è·Ÿä»€éº¼ä¸»é¡Œæœ‰é—œï¼Œç”¨ `[Topic],[Topic]` æ ¼å¼}

---

ä½ èªªå¾—å°ï¼Œ`complete` å’Œ `always` çš„åŠŸèƒ½ç¢ºå¯¦å¾ˆç›¸ä¼¼ï¼Œå…©è€…ä¸»è¦çš„å·®ç•°åœ¨æ–¼ï¼š

1. **å‘¼å«æ™‚æ©Ÿ**ï¼š
```javascript
$.ajax({
    complete: function() {  // é€™æ˜¯ ajax è¨­å®šé¸é …ï¼Œååº•å±¤çš„å›èª¿
        console.log('complete');
    }
})
.always(function() {       // é€™æ˜¯ Promise çš„æ–¹æ³•ï¼Œæ¯”è¼ƒç¾ä»£çš„å¯«æ³•
    console.log('always');
});
```

2. **å»ºè­°ç”¨æ³•**ï¼š
- `complete`ï¼šèˆŠç‰ˆ jQuery çš„å¯«æ³•ï¼Œé€šå¸¸ç”¨åœ¨éœ€è¦ç›´æ¥è™•ç† XMLHttpRequest å°è±¡çš„å ´æ™¯
- `always`ï¼šè¼ƒæ–°çš„ Promise é¢¨æ ¼å¯«æ³•ï¼Œç¨‹å¼ç¢¼æ›´å®¹æ˜“ç¶­è­·å’Œä¸²æ¥

3. **ç¨‹å¼ç¢¼é¢¨æ ¼**ï¼š
```javascript
// èˆŠé¢¨æ ¼ï¼šæŠŠæ‰€æœ‰é‚è¼¯éƒ½æ”¾åœ¨ ajax é¸é …ä¸­
$.ajax({
    beforeSend: function() { },
    success: function() { },
    error: function() { },
    complete: function() { }
});

// æ–°é¢¨æ ¼ï¼šä½¿ç”¨ Promise éˆå¼èª¿ç”¨
$.ajax({ /* è¨­å®š */ })
    .done(function() { })
    .fail(function() { })
    .always(function() { });
```

**å»ºè­°**ï¼š
- å¦‚æœä½ çš„å°ˆæ¡ˆæ˜¯æ–°é–‹ç™¼çš„ï¼Œå»ºè­°çµ±ä¸€ä½¿ç”¨ `.always()`
- å¦‚æœä½ åœ¨ç¶­è­·èˆŠç¨‹å¼ï¼Œçœ‹åˆ°åŸæœ¬ç”¨ `complete`ï¼Œå°±ç¹¼çºŒç”¨ `complete` ä¿æŒä¸€è‡´æ€§
- é¿å…åœ¨åŒä¸€å€‹ ajax è«‹æ±‚ä¸­åŒæ™‚ä½¿ç”¨å…©è€…ï¼Œå®¹æ˜“é€ æˆæ··æ·†

---
`æ‰€ä»¥ complete ã€ always æŒ‘ä¸€å€‹ä¾†å¯«å³å¯ï¼Ÿ`

æ˜¯çš„ï¼Œæ­£ç¢ºï¼æŒ‘ä¸€å€‹ä¾†å¯«å³å¯ï¼Œå»ºè­°ä½¿ç”¨ `.always()`ï¼Œå› ç‚ºé€™æ˜¯è¼ƒæ–°çš„ Promise é¢¨æ ¼å¯«æ³•ã€‚

ä»¥ä½ çš„ç¨‹å¼ç¢¼ç‚ºä¾‹ï¼Œæˆ‘æœƒé€™æ¨£æ”¹å¯«ï¼š
```javascript
$.ajax({
    url: this._urls.updateOptionsAction,
    type: 'GET',
    dataType: 'json',
    data: { year: $yearSelect.val() },
    beforeSend: function () {
        $.blockUI({
            baseZ: 2000,
            message: self._userInterfaces.loadingMessage,
            css: self._userInterfaces.loadingStyle
        });
    }
})
.done(function (result) {
    if (result && result.length > 0) {
        $.each(result, function (index, item) {
            const option = $('<option>', {
                value: item.value,
                text: item.text
            });
            $seriesSelect.append(option);
        });
    }
})
.fail(function (xhr) {
    ShowModal(`Series æŸ¥è©¢å¤±æ•— (HTTP ${xhr.status})ï¼Œè«‹é€šçŸ¥ç³»çµ±äººå“¡ã€‚`);
})
.always(function () {
    // æŠŠæ‰€æœ‰çµå°¾å·¥ä½œæ”¾é€™è£¡
    $.unblockUI();
});
```

é€™æ¨£ç¨‹å¼ç¢¼é¢¨æ ¼æœƒæ¯”è¼ƒä¸€è‡´ï¼Œä¹Ÿæ¯”è¼ƒå¥½ç¶­è­·ã€‚ä¸éœ€è¦åŒæ™‚ä½¿ç”¨ `complete` å’Œ `.always()`ï¼Œé¿å…é‡è¤‡åŸ·è¡Œæˆ–é€ æˆæ··æ·†ã€‚